---
import { ScanSearchIcon, ToyBrickIcon } from "lucide-react";
import Section from "../layout/Section.astro";
import { SvgLogos } from "../ui/SvgLogos";

export const CATEGORIES = [
  {
    title: "Frameworks",
    description: "Adapt your UI to your authorization policies.",
    items: [
      {
        title: "React Server Components",
        description: "Automatic RSC scope and <Access /> component.",
        Icon: SvgLogos.React,
        link: "/docs/plugins/react-server-components",
      },
      {
        title: "React Client",
        description: "React client components and hooks for Kilpi Client bindings.",
        Icon: SvgLogos.React,
        link: "/docs/plugins/react-client-components",
      },
    ],
  },
  {
    title: "Utilities",
    description: "Plugins to extend the features of Kilpi.",
    items: [
      {
        title: "Audit Plugin",
        description: "Collect your authorization decisions for auditing.",
        Icon: ScanSearchIcon,
        link: "/docs/plugins/audit",
      },
      {
        title: "Endpoint Plugin",
        description:
          "Automatically construct an API endpoint for fetching the current subject and authorization decisions.",
        Icon: ToyBrickIcon,
        link: "/docs/plugins/endpoint",
      },
    ],
  },
  {
    title: "Installation guides",
    description:
      "With or without plugins, see how to start using Kilpi with your favorite framework.",
    items: [
      {
        title: "Next",
        Icon: SvgLogos.Next,
        link: "/docs/installation/next",
        description: "",
      },
      {
        title: "Hono",
        Icon: SvgLogos.Hono,
        link: "/docs/installation/hono",
        description: "",
      },
      {
        title: "Express",
        Icon: SvgLogos.Express,
        link: "/docs/installation/express",
        description: "",
      },
      {
        title: "Nest.js",
        Icon: SvgLogos.NestJs,
        link: "/docs/installation/nest-js",
        description: "",
      },
      {
        title: "Koa",
        Icon: "https://images.seeklogo.com/logo-png/36/2/koa-logo-png_seeklogo-362249.png",
        link: "/docs/installation/koa",
        description: "",
      },
      {
        title: "Oak",
        Icon: "https://oakserver.org/oak_logo_head.svg?__frsh_c=6ccb8f389a5d8534f54e00d00f731f6c6dc69c61",
        link: "/docs/installation/oak",
        description: "",
      },
    ],
  },
];
---

<Section id="plugins" class="py-32">
  <h2 class="text-3xl font-bold tracking-tight sm:text-4xl">Plugins to fit your use case</h2>

  {
    CATEGORIES.map((category) => (
      <div class="flex flex-col gap-4">
        <div class="flex flex-col gap-1">
          <h3 class="text-xl font-semibold">{category.title}</h3>
          <p class="text-muted-fg">{category.description}</p>
        </div>

        <div
          class="flex flex-col sm:grid grid-cols-1 gap-4"
          style={{
            gridTemplateColumns: "repeat(auto-fill, minmax(260px, 1fr))",
          }}
        >
          {category.items.map((item) => (
            <a
              class="flex flex-col gap-2 rounded-lg border bg-card p-4 shadow-lg shadow-fg/5"
              href={item.link}
            >
              <div class="flex items-center gap-2">
                {!item.Icon ? null : typeof item.Icon === "string" ? (
                  <img src={item.Icon} class="size-4" alt={item.title} />
                ) : (
                  <item.Icon className="size-4 text-muted-fg" />
                )}
                <p class="font-semibold">{item.title}</p>
              </div>
              {item.description && <p class="text-muted-fg text-sm">{item.description}</p>}
            </a>
          ))}
          <div class="flex flex-col bg-muted-bg justify-center items-center gap-2 rounded-lg p-4 text-muted-fg">
            And more to come...
          </div>
        </div>
      </div>
    ))
  }

  <div class="flex flex-col gap-1">
    <h3 class="text-xl font-semibold">Couldn't find yours?</h3>
    <p class="text-muted-fg max-w-xl">
      Kilpi is framework agnostic and can always be used without any plugins or component libraries.
      You may also{" "}
      <a href="https://github.com/Jussinevavuor/kilpi/issues/new" class="underline">
        request a new integration, feature, or plugin
      </a>{" "}
      or{" "}
      <a
        href="https://jussinevavuori.com#contact"
        class="underline"
        target="_blank"
        rel="noopener noreferrer"
      >
        contact me
      </a>{" "}
      to request support.
    </p>
  </div>
</Section>
