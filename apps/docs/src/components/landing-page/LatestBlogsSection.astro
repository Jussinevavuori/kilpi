---
import type { CollectionEntry } from "astro:content";
import BlogPost from "../blog/BlogPost.astro";
import Section from "../layout/Section.astro";

const N_LATEST_BLOGS = 3;

type Props = {
  blogs: Array<CollectionEntry<"blog">>;
};

const { blogs } = Astro.props;

const shownBlogs = blogs.filter((_) => !_.data.archivedAt).slice(0, N_LATEST_BLOGS);
---

<Section class="py-32" id="latest-blogs">
  <h2 class="text-3xl font-bold tracking-tight sm:text-4xl">Latest articles</h2>

  {
    shownBlogs.length === 0 ? (
      <div class="p-16 rounded border border-dashed text-black/50 text-center">
        No articles to show
      </div>
    ) : (
      <div class="flex flex-col gap-16">
        {shownBlogs.map((blog) => (
          <BlogPost blog={blog} />
        ))}
      </div>
    )
  }

  <a href="/blog" class="underline font-medium"> View all articles </a>
</Section>
